(function(){var n=rcp_taxamo_vars.taxamo_public_token,h=rcp_taxamo_vars.tax_included,k=rcp_taxamo_vars.currency,d=jQuery("#rcp_country"),e=jQuery("#rcp_vat_number"),f=jQuery("input.card-number"),g=rcp_taxamo_vars.priceClass,c,l=null,m=function(){var b=jQuery('input[type="radio"][name="rcp_level"]').filter(":checked").parents(".rcp_subscription_level");c=Taxamo.transaction().currencyCode(k);d.length&&""!==d.val()&&c.buyerCountryCode(d.val()).forceCountryCode(d.val());e.length&&""!==e.val()&&c.buyerTaxNumber(e.val());
f.length&&""!==f.val()&&c.buyerCardNumberPrefix(f.val().substring(0,9));h?c.transactionLine("line1").totalAmount(parseFloat(jQuery(g,b).attr("rel"))).description(jQuery(".rcp_subscription_level_name",b).text()).productType("default").done():c.transactionLine("line1").amount(parseFloat(jQuery(g,b).attr("taxamo-amount"))).description(jQuery(".rcp_subscription_level_name",b).text()).productType("default").done()};Taxamo.options.scanPrices.priceTemplate=rcp_taxamo_vars.priceTemplate;Taxamo.options.scanPrices.noTaxTitle=
rcp_taxamo_vars.noTaxTitle;Taxamo.options.scanPrices.taxTitle=rcp_taxamo_vars.taxTitle;Taxamo.subscribe("taxamo.country.selected",function(b){jQuery(".rcp_subscription_fieldset").css({opacity:.25});setTimeout(function(){jQuery(".rcp_subscription_fieldset").animate({opacity:1},500)},2E3)});Taxamo.initialize(n);Taxamo.setCurrencyCode(k);h||Taxamo.scanPrices(g);Taxamo.detectCountry();jQuery(document).ready(function(){Taxamo.setBillingCountry(jQuery("#rcp_country").val());Taxamo.setTaxNumber(jQuery("#rcp_vat_number").val())}).on("change",
"#rcp_country",function(){Taxamo.setBillingCountry(jQuery(this).val())}).on("focusout",".card-number, #rcp_vat_number",function(){jQuery(this).hasClass("card-number")?Taxamo.setCreditCardPrefix(jQuery(this).val().substring(0,9)):Taxamo.setTaxNumber(jQuery(this).val())}).on("click",'input[type="radio"][name="rcp_level"]',function(){m()}).on("submit","#rcp_registration_form",function(b){var d=jQuery(this);if(l)return!0;b.preventDefault();b.stopPropagation();m();Taxamo.storeTransaction(c,function(a){jQuery("#rcp_taxamo_transaction_key").val(a.transaction.key);
jQuery("#rcp_taxamo_tax_supported").val(a.transaction.tax_supported);jQuery("#rcp_taxamo_amount").val(a.transaction.amount);jQuery("#rcp_taxamo_tax_rate").val(a.transaction.transaction_lines[0].tax_rate);jQuery("#rcp_taxamo_tax_amount").val(a.transaction.tax_amount);jQuery("#rcp_taxamo_total_amount").val(a.transaction.total_amount);l=a.transaction.key;d.trigger("submit")},function(a){console.log(a)})})})();